-- H2 2.1.214;
;             
CREATE USER IF NOT EXISTS "SA" SALT '845ea25e97f2ae2f' HASH '99a7f70704a352bdbf58cc29152103a52f67df446e3cce8db4eebc9022eb8da2' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."ACCOUNTS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "USER_N_ID" BIGINT,
    "USER_R_ID" BIGINT,
    "USER_U_ID" BIGINT,
    "LOGIN" CHARACTER VARYING(100) NOT NULL,
    "PASSWORD" CHARACTER VARYING(100) NOT NULL
);               
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_AF43" PRIMARY KEY("ID");           
     
CREATE CACHED TABLE "PUBLIC"."KLASA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "NAZWA" CHARACTER VARYING(50) NOT NULL
);               
ALTER TABLE "PUBLIC"."KLASA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");        

CREATE CACHED TABLE "PUBLIC"."OCENA"(
    "OCENA" INTEGER NOT NULL,
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 129) NOT NULL,
    "ID_NAUCZYCIELA" BIGINT NOT NULL,
    "ID_PRZEDMIOTU" BIGINT NOT NULL,
    "ID_UCZNIA" BIGINT NOT NULL,
    "DZIEN" CHARACTER VARYING(255),
    "GODZINA" CHARACTER VARYING(255),
    "OPIS" CHARACTER VARYING(255) NOT NULL
);    
ALTER TABLE "PUBLIC"."OCENA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_47" PRIMARY KEY("ID");       
-- 20 +/- SELECT COUNT(*) FROM PUBLIC.OCENA;  
   
CREATE CACHED TABLE "PUBLIC"."PRZEDMIOT"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "ID_NAUCZYCIELA" BIGINT NOT NULL,
    "NAZWA" CHARACTER VARYING(100) NOT NULL
);   
ALTER TABLE "PUBLIC"."PRZEDMIOT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_AE" PRIMARY KEY("ID");   

CREATE CACHED TABLE "PUBLIC"."RELACJA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "ID_RODZIC" BIGINT NOT NULL,
    "ID_UCZEN" BIGINT NOT NULL
);       
ALTER TABLE "PUBLIC"."RELACJA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");      

CREATE CACHED TABLE "PUBLIC"."SALA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NR_SALI" CHARACTER VARYING(10) NOT NULL
);              
ALTER TABLE "PUBLIC"."SALA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");         
     
CREATE CACHED TABLE "PUBLIC"."SPRAWDZIAN"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 193) NOT NULL,
    "ID_KLASY" BIGINT NOT NULL,
    "ID_NAUCZYCIELA" BIGINT NOT NULL,
    "ID_PRZEDMIOTU" BIGINT NOT NULL,
    "ID_SALI" BIGINT NOT NULL,
    "KATEGORIA" CHARACTER VARYING(100) NOT NULL,
    "DZIEN" CHARACTER VARYING(255),
    "GODZINA" CHARACTER VARYING(255)
);          
ALTER TABLE "PUBLIC"."SPRAWDZIAN" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");   
       
CREATE CACHED TABLE "PUBLIC"."USER_NAU"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "IMIE" CHARACTER VARYING(50) NOT NULL,
    "IMIE2" CHARACTER VARYING(50),
    "EMAIL" CHARACTER VARYING(100),
    "NAZWISKO" CHARACTER VARYING(100) NOT NULL
);   
ALTER TABLE "PUBLIC"."USER_NAU" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");     
             
CREATE CACHED TABLE "PUBLIC"."USER_RODZIC"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "TELEFON" CHARACTER VARYING(15),
    "IMIE" CHARACTER VARYING(50) NOT NULL,
    "IMIE2" CHARACTER VARYING(50),
    "EMAIL" CHARACTER VARYING(100) NOT NULL,
    "NAZWISKO" CHARACTER VARYING(100) NOT NULL
); 
ALTER TABLE "PUBLIC"."USER_RODZIC" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_12" PRIMARY KEY("ID"); 
     
CREATE CACHED TABLE "PUBLIC"."USER_UCZEN"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "ID_KLASY" BIGINT NOT NULL,
    "IMIE" CHARACTER VARYING(50) NOT NULL,
    "IMIE2" CHARACTER VARYING(50),
    "EMAIL" CHARACTER VARYING(100),
    "NAZWISKO" CHARACTER VARYING(100) NOT NULL
);
ALTER TABLE "PUBLIC"."USER_UCZEN" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ID");   

CREATE CACHED TABLE "PUBLIC"."UWAGA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 97) NOT NULL,
    "ID_NAUCZYCIELA" BIGINT NOT NULL,
    "ID_UCZNIA" BIGINT NOT NULL,
    "DZIEN" CHARACTER VARYING(255),
    "GODZINA" CHARACTER VARYING(255),
    "TRESC" CHARACTER VARYING NOT NULL
);              
ALTER TABLE "PUBLIC"."UWAGA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4D" PRIMARY KEY("ID");       
            
CREATE CACHED TABLE "PUBLIC"."LEKCJA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DZIEN" CHARACTER VARYING(255),
    "KONGODZ" CHARACTER VARYING(255),
    "POCZGODZ" CHARACTER VARYING(255),
    "ID_KLASY" BIGINT NOT NULL,
    "ID_NAUCZYCIELA" BIGINT NOT NULL,
    "PRZEDMIOT" BIGINT NOT NULL,
    "ID_SALI" BIGINT NOT NULL,
    "DZIEN_TYODNIA" CHARACTER VARYING(255)
);
ALTER TABLE "PUBLIC"."LEKCJA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");       

CREATE CACHED TABLE "PUBLIC"."WIADOMOSC_N"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 97) NOT NULL,
    "ID_ODBIORCY" BIGINT NOT NULL,
    "ID_WIADOMOSCI" BIGINT NOT NULL
);            
ALTER TABLE "PUBLIC"."WIADOMOSC_N" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");  
  
CREATE CACHED TABLE "PUBLIC"."WIADOMOSC_R"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "ID_ODBIORCY" BIGINT NOT NULL,
    "ID_WIADOMOSCI" BIGINT NOT NULL
);            
ALTER TABLE "PUBLIC"."WIADOMOSC_R" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5A" PRIMARY KEY("ID"); 
     
CREATE CACHED TABLE "PUBLIC"."WIADOMOSC_U"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 34) NOT NULL,
    "ID_ODBIORCY" BIGINT NOT NULL,
    "ID_WIADOMOSCI" BIGINT NOT NULL
);            
ALTER TABLE "PUBLIC"."WIADOMOSC_U" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5AC" PRIMARY KEY("ID");
            
CREATE CACHED TABLE "PUBLIC"."WIADOMOSC"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 98) NOT NULL,
    "TRESC" CHARACTER VARYING NOT NULL,
    "TYTUL" CHARACTER VARYING(255) NOT NULL,
    "ZALACZNIKI" BINARY LARGE OBJECT,
    "DZIEN" CHARACTER VARYING(255),
    "GODZ" CHARACTER VARYING(255),
    "NADAWCA" BIGINT
);          
ALTER TABLE "PUBLIC"."WIADOMOSC" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ID");    
         
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" UNIQUE("USER_N_ID");   
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_AF4" UNIQUE("USER_U_ID"); 
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_AF" UNIQUE("USER_R_ID");  
ALTER TABLE "PUBLIC"."RELACJA" ADD CONSTRAINT "PUBLIC"."FK2P6C25J6PFAM42W1NWKCOLVHC" FOREIGN KEY("ID_UCZEN") REFERENCES "PUBLIC"."USER_UCZEN"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."LEKCJA" ADD CONSTRAINT "PUBLIC"."FK41B6Y82FV7VM8K3M10NEPOPTS" FOREIGN KEY("PRZEDMIOT") REFERENCES "PUBLIC"."PRZEDMIOT"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."UWAGA" ADD CONSTRAINT "PUBLIC"."FK5PSQDENU5NS8SFG2IEH28UTHY" FOREIGN KEY("ID_UCZNIA") REFERENCES "PUBLIC"."USER_UCZEN"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."UWAGA" ADD CONSTRAINT "PUBLIC"."FK8CKOI40LT0LAQR0W74HP8N9AN" FOREIGN KEY("ID_NAUCZYCIELA") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."OCENA" ADD CONSTRAINT "PUBLIC"."FKH8KD574Y7Y3VWUJ1EBRPCMLXG" FOREIGN KEY("ID_NAUCZYCIELA") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."WIADOMOSC_R" ADD CONSTRAINT "PUBLIC"."FKI6LEUT6OLT8V4B3MRN3H3PCAQ" FOREIGN KEY("ID_ODBIORCY") REFERENCES "PUBLIC"."USER_RODZIC"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."LEKCJA" ADD CONSTRAINT "PUBLIC"."FK98TNCDWKNQ6K4QKVEXDMONVH0" FOREIGN KEY("ID_KLASY") REFERENCES "PUBLIC"."KLASA"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."FK79STKQ5NGEXS0IIO85WD6E47F" FOREIGN KEY("USER_N_ID") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."WIADOMOSC_N" ADD CONSTRAINT "PUBLIC"."FKKSIQJWK0OC9TFA9Q3S8G9RG79" FOREIGN KEY("ID_ODBIORCY") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."SPRAWDZIAN" ADD CONSTRAINT "PUBLIC"."FKHOYLAHWYYPW59JLYOXQV2RSVL" FOREIGN KEY("ID_KLASY") REFERENCES "PUBLIC"."KLASA"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."SPRAWDZIAN" ADD CONSTRAINT "PUBLIC"."FKKTQ5DBLHUFKDQM76EKTHNK57D" FOREIGN KEY("ID_PRZEDMIOTU") REFERENCES "PUBLIC"."PRZEDMIOT"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."WIADOMOSC_U" ADD CONSTRAINT "PUBLIC"."FKNGLJJ2PQUB0212H0H35VP1IEB" FOREIGN KEY("ID_ODBIORCY") REFERENCES "PUBLIC"."USER_UCZEN"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."LEKCJA" ADD CONSTRAINT "PUBLIC"."FK3L4FMQEOLHEEAVXFSQWVR1ORP" FOREIGN KEY("ID_NAUCZYCIELA") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."SPRAWDZIAN" ADD CONSTRAINT "PUBLIC"."FKLNWU9IJHQMFC5PBGF04MEYCD3" FOREIGN KEY("ID_SALI") REFERENCES "PUBLIC"."SALA"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."OCENA" ADD CONSTRAINT "PUBLIC"."FK1H216LU0S5T0355X5Q1SS3RRM" FOREIGN KEY("ID_PRZEDMIOTU") REFERENCES "PUBLIC"."PRZEDMIOT"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."PRZEDMIOT" ADD CONSTRAINT "PUBLIC"."FKPFPV2IPEPRHMHNPD7T3BS9EFI" FOREIGN KEY("ID_NAUCZYCIELA") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;            
ALTER TABLE "PUBLIC"."USER_UCZEN" ADD CONSTRAINT "PUBLIC"."FKJ4VAX1W388DVM9D8ECJI81E80" FOREIGN KEY("ID_KLASY") REFERENCES "PUBLIC"."KLASA"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."LEKCJA" ADD CONSTRAINT "PUBLIC"."FK8X5S83O098R96INU1N83G1JUM" FOREIGN KEY("ID_SALI") REFERENCES "PUBLIC"."SALA"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."RELACJA" ADD CONSTRAINT "PUBLIC"."FKPGQ10TL08BDJBPH19425OV8ID" FOREIGN KEY("ID_RODZIC") REFERENCES "PUBLIC"."USER_RODZIC"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."OCENA" ADD CONSTRAINT "PUBLIC"."FK59V5GKRRN6P6J89MSHIA44U0D" FOREIGN KEY("ID_UCZNIA") REFERENCES "PUBLIC"."USER_UCZEN"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."WIADOMOSC_R" ADD CONSTRAINT "PUBLIC"."FK8UPSBXWIE03L5RGFKUIHHA93U" FOREIGN KEY("ID_WIADOMOSCI") REFERENCES "PUBLIC"."WIADOMOSC"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."FKO002SSYRJKUDR3XH3XUYVU3TW" FOREIGN KEY("USER_U_ID") REFERENCES "PUBLIC"."USER_UCZEN"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."WIADOMOSC" ADD CONSTRAINT "PUBLIC"."FK9HVAUH6K4X6SFJ8XE52BW7P2H" FOREIGN KEY("NADAWCA") REFERENCES "PUBLIC"."ACCOUNTS"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."ACCOUNTS" ADD CONSTRAINT "PUBLIC"."FKN71XMME8CJT4LJFBJOB1XJSQW" FOREIGN KEY("USER_R_ID") REFERENCES "PUBLIC"."USER_RODZIC"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."WIADOMOSC_N" ADD CONSTRAINT "PUBLIC"."FKEJF3GKT8MND0HGFAC2DKCACKD" FOREIGN KEY("ID_WIADOMOSCI") REFERENCES "PUBLIC"."WIADOMOSC"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."WIADOMOSC_U" ADD CONSTRAINT "PUBLIC"."FKP1SIVP4G9WTU8DV20MGK321LN" FOREIGN KEY("ID_WIADOMOSCI") REFERENCES "PUBLIC"."WIADOMOSC"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."SPRAWDZIAN" ADD CONSTRAINT "PUBLIC"."FK5RSQ6DV7QS4IT63TOY5XRO2C5" FOREIGN KEY("ID_NAUCZYCIELA") REFERENCES "PUBLIC"."USER_NAU"("ID") NOCHECK;           
